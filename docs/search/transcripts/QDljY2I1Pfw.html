<section>
<p><span data-start="0" data-end="3.395">[MUSIC PLAYING]</span> </p>
</section>

<section>
<p><span data-start="5.372" data-end="6.83"><span class="speaker">Houssein Djirdeh</span>: Hello, everybody.</span> <span data-start="6.83" data-end="9.34">My name's Houssein Djirdeh, and I'm a web developer advocate</span> <span data-start="9.34" data-end="10.038">here at Google.</span> </p>
</section>

<section>
<p><span data-start="10.038" data-end="11.33"><span class="speaker">Shubhie Panicker</span>: Hi, everyone.</span> <span data-start="11.33" data-end="12.76">My name is Shubhie Panicker.</span> <span data-start="12.76" data-end="16.06">I'm a software engineer working on the web platform in Chrome.</span> </p>
</section>

<section>
<p><span data-start="16.06" data-end="17.56"><span class="speaker">Houssein Djirdeh</span>: And our talk today</span> <span data-start="17.56" data-end="20.38">will cover how we at Chrome have been advancing the web</span> <span data-start="20.38" data-end="23.6">framework ecosystem in a number of different ways.</span> </p>
<p><span data-start="26.82" data-end="30.75">Engineers, managers, advocates, and everybody on the Chrome</span> <span data-start="30.75" data-end="33.75">team share a very common goal, and that</span> <span data-start="33.75" data-end="36.69">is answering the question of how we can collectively</span> <span data-start="36.69" data-end="39.06">make the web better.</span> <span data-start="39.06" data-end="40.77">Now there's a number of different ways</span> <span data-start="40.77" data-end="44.74">that we try and make this possible.</span> <span data-start="44.74" data-end="47.43">We continue to improve the core JavaScript and WebAssembly</span> <span data-start="47.43" data-end="50.69">engine that powers Chrome.</span> </p>
<p><span data-start="50.69" data-end="53.87">We also continue to improve the API surface provided</span> <span data-start="53.87" data-end="55.64">by the browser so that developers</span> <span data-start="55.64" data-end="57.89">are better equipped with APIs that they</span> <span data-start="57.89" data-end="63.53">can use to improve how their sites function and load.</span> <span data-start="63.53" data-end="65.209">And at another angle, we also try</span> <span data-start="65.209" data-end="69.61">to improve websites that are already in production today.</span> <span data-start="69.61" data-end="71.57">But things get a little tricky here.</span> <span data-start="71.57" data-end="73.54">How exactly should we do this?</span> <span data-start="76.92" data-end="78.45">For the most part, we can probably</span> <span data-start="78.45" data-end="80.64">agree that most web developers do not</span> <span data-start="80.64" data-end="84.39">build entirely custom infrastructure and tooling.</span> </p>
<p><span data-start="84.39" data-end="86.58">Where possible, developers usually</span> <span data-start="86.58" data-end="90.73">prefer to rely on open source tools.</span> <span data-start="90.73" data-end="94.62">So one way to improve actual websites that developers ship</span> <span data-start="94.62" data-end="97.47">are to improve the actual tools that are being</span> <span data-start="97.47" data-end="100.27">used to build those sites.</span> <span data-start="100.27" data-end="102.46">Better open-source tooling can directly</span> <span data-start="102.46" data-end="104.14">result in a better web.</span> <span data-start="107.07" data-end="111.13">But what exactly do we mean by open-source tooling?</span> <span data-start="111.13" data-end="114.55">Well, when it comes to building a brand new site from scratch,</span> <span data-start="114.55" data-end="116.89">developers today have many options.</span> </p>
<p><span data-start="119.49" data-end="121.26">Client-side frameworks can be used</span> <span data-start="121.26" data-end="125.48">to build dynamic and fully fledged single page apps.</span> <span data-start="125.48" data-end="128.479">Static site generators are tools many people use to build</span> <span data-start="128.479" data-end="131.85">static sites and applications.</span> <span data-start="131.85" data-end="134.22">People also have the option to use a content management</span> <span data-start="134.22" data-end="135.95">system.</span> <span data-start="135.95" data-end="137.45">And there are also website builders,</span> <span data-start="137.45" data-end="141.51">like Wix and Squarespace.</span> <span data-start="141.51" data-end="143.55">For the purpose of this talk, we want</span> <span data-start="143.55" data-end="147.15">to focus on one of these categories specifically.</span> </p>
<p><span data-start="147.15" data-end="150.621">Namely, client-side frameworks and UI libraries.</span> <span data-start="154.31" data-end="157.1">MDN will soon release the first edition of their developer</span> <span data-start="157.1" data-end="159.47">and designer survey to try and learn more</span> <span data-start="159.47" data-end="163.56">about the needs and frustrations of web developers.</span> <span data-start="163.56" data-end="167.4">With over 28,000 responses, one interesting result</span> <span data-start="167.4" data-end="171.45">from this survey was that 72% of respondents</span> <span data-start="171.45" data-end="175.95">actively use React, Angular, or Vue for their sites.</span> <span data-start="179.693" data-end="181.11">We also tried to look at this data</span> <span data-start="181.11" data-end="183.66">from a slightly different angle and find out</span> <span data-start="183.66" data-end="187.34">how many sites that use frameworks make up the top 100</span> </p>
<p><span data-start="187.34" data-end="190.76">URLs by time spent.</span> <span data-start="190.76" data-end="193.8">And we found that 30 of the top 100 URLs</span> <span data-start="193.8" data-end="196.86">use React, Angular, or Vue.</span> <span data-start="196.86" data-end="199.77">And this does not take into account many other frameworks</span> <span data-start="199.77" data-end="201.181">that are available.</span> <span data-start="204.5" data-end="206">We also wanted to get an idea of how</span> <span data-start="206" data-end="210.77">many actual sites in the wild use a tool like React.</span> </p>
<p><span data-start="210.77" data-end="215.99">By using HTTP Archive, we found that over 350,000 origins</span> <span data-start="215.99" data-end="217.99">use React in some form.</span> <span data-start="221.59" data-end="223.45">All this data shows that frameworks</span> <span data-start="223.45" data-end="225.67">are used in a lot of sites.</span> <span data-start="225.67" data-end="229.46">So it's not really just about advancing the ecosystem itself,</span> <span data-start="229.46" data-end="231.46">but by doing that, we would ultimately be</span> <span data-start="231.46" data-end="233.75">advancing the web as a whole.</span> </p>
</section>

<section>
<p><span data-start="237.833" data-end="240.25"><span class="speaker">Shubhie Panicker</span>: So we've identified our target audience,</span> <span data-start="240.25" data-end="241.83">but how can we help?</span> <span data-start="241.83" data-end="245.25">Most concerns here fall into two broad categories — </span> <span data-start="245.25" data-end="248.02">user experience and developer experience.</span> <span data-start="248.02" data-end="251.07">So that's UX and DX.</span> </p>
<p><span data-start="251.07" data-end="253.88">Most of our talk today is going to be focused on user</span> <span data-start="253.88" data-end="255.47">experience and performance.</span> <span data-start="259.75" data-end="261.3">This is an important problem.</span> <span data-start="261.3" data-end="264.48">Frameworks are struggling to meet Chrome's targets</span> <span data-start="264.48" data-end="268.35">for user-centric metrics, like first contentful paint, largest</span> <span data-start="268.35" data-end="271.62">contentful paint, first input delay.</span> <span data-start="271.62" data-end="273.01">Paul and Elizabeth's talk covered</span> <span data-start="273.01" data-end="274.88">what these metrics mean.</span> </p>
<p><span data-start="274.88" data-end="278.22">Our tooling emphasizes the initial page a lot.</span> <span data-start="278.22" data-end="280.63">And this is challenging for these apps.</span> <span data-start="280.63" data-end="283.27">On the other hand, they do well on route transition,</span> <span data-start="283.27" data-end="284.8">subsequent interactions.</span> </p>
<p><span data-start="284.8" data-end="288.37">But our metrics don't reflect this yet.</span> <span data-start="288.37" data-end="291.55">So how should we invest in the framework ecosystem</span> <span data-start="291.55" data-end="296.123">to address both DX and UX challenges?</span> <span data-start="296.123" data-end="297.54">We think there's a big opportunity</span> <span data-start="297.54" data-end="301.2">here for tooling to help with both of these problems.</span> <span data-start="301.2" data-end="303.81">In particular, by bringing good defaults</span> <span data-start="303.81" data-end="306.36">and by being opinionated.</span> <span data-start="306.36" data-end="308.54">So I want to take a moment here to define</span> <span data-start="308.54" data-end="311.72">this notion of what we decided to call a web framework.</span> <span data-start="311.72" data-end="315.08">It's an end-to-end system that controls every aspect,</span> <span data-start="315.08" data-end="319.02">from getting started, everyday development, to deployment.</span> </p>
<p><span data-start="319.02" data-end="322.46">It's directly positioned to impact both UX and DX</span> <span data-start="322.46" data-end="325.04">by controlling the server and the client,</span> <span data-start="325.04" data-end="329.28">the build and the serve, the dev and the prod environments.</span> <span data-start="329.28" data-end="332.69">And this is a core premise of our work in this space.</span> <span data-start="332.69" data-end="334.7">Through these web frameworks, we want</span> <span data-start="334.7" data-end="338.6">to enable developers to successfully build and maintain</span> <span data-start="338.6" data-end="340.52">high quality production apps.</span> <span data-start="343.07" data-end="347.12">So a web framework helps a developer to be productive.</span> </p>
<p><span data-start="347.12" data-end="349.64">Building a production app just requires</span> <span data-start="349.64" data-end="352.4">too many different moving parts that the developer</span> <span data-start="352.4" data-end="355.37">has to reason about and string together.</span> <span data-start="355.37" data-end="359.63">This list is just a small subset of the concerns of a production</span> <span data-start="359.63" data-end="360.74">app.</span> </p>
<p><span data-start="360.74" data-end="363.05">And if you are thinking that I want</span> <span data-start="363.05" data-end="366.44">to minimize opinions and integration so I can maximize</span> <span data-start="366.44" data-end="370.13">my flexibility, consider embedding yourself</span> <span data-start="370.13" data-end="373.28">in a team of developers who are on the hook for shipping</span> <span data-start="373.28" data-end="374.99">a business critical app.</span> <span data-start="374.99" data-end="379.38">Developers want to —  and should —  focus on features.</span> <span data-start="379.38" data-end="382.55">And I know this from my personal experience working at Google,</span> <span data-start="382.55" data-end="385.49">being on the hook on infra teams for shipping products</span> <span data-start="385.49" data-end="389.66">like Google Search, Google Photos.</span> <span data-start="389.66" data-end="391.7">In addition to developer productivity,</span> <span data-start="391.7" data-end="394.31">web frameworks are also directly positioned</span> <span data-start="394.31" data-end="396.79">to impact performance and UX.</span> </p>
<p><span data-start="396.79" data-end="398.75">And this is because they bring opinions</span> <span data-start="398.75" data-end="401">on things like server-side rendering,</span> <span data-start="401" data-end="403.88">flushing early HTML chunks, streaming.</span> <span data-start="403.88" data-end="408.04">They control how and when exactly to fetch JavaScript,</span> <span data-start="408.04" data-end="410.83">CSS, data, and images.</span> <span data-start="410.83" data-end="413.66">They unlock features, like progressive delivery,</span> <span data-start="413.66" data-end="414.59">lazy fetching.</span> <span data-start="414.59" data-end="418.365">All of this directly impacts those user-centric performance</span> <span data-start="418.365" data-end="418.865">metrics.</span> <span data-start="422.32" data-end="424.17">So I want to take a moment here to clarify</span> <span data-start="424.17" data-end="428.07">the distinction between, on the left, a UI framework</span> <span data-start="428.07" data-end="432.78">or library versus what I just defined as a web framework.</span> </p>
<p><span data-start="432.78" data-end="435.36">UI frame libraries like React and Vue,</span> <span data-start="435.36" data-end="437.91">they tend to be agnostic to a lot of the concerns I mentioned</span> <span data-start="437.91" data-end="439.14">before.</span> <span data-start="439.14" data-end="441.78">On the right, we have fuller featured frameworks</span> <span data-start="441.78" data-end="446.16">in the ecosystem, like Next, Nuxt, Gatsby.</span> <span data-start="446.16" data-end="449.37">Angular and Ember kind of blurred the line here</span> <span data-start="449.37" data-end="451.81">by playing both roles.</span> <span data-start="451.81" data-end="454.71">So if you're starting to build a new app,</span> <span data-start="454.71" data-end="458.4">I recommend reaching for a full-featured web framework</span> <span data-start="458.4" data-end="460.41">so that developers on your team can</span> <span data-start="460.41" data-end="462.72">focus on what matters most to them, which</span> <span data-start="462.72" data-end="464.04">is building features.</span> <span data-start="464.04" data-end="466.11">Starting with a bare-bones UI framework</span> <span data-start="466.11" data-end="468.75">means reinventing the wheel and building</span> <span data-start="468.75" data-end="469.95">a lot of your own infra.</span> <span data-start="472.87" data-end="475.36">So we're excited for all the strides</span> <span data-start="475.36" data-end="480.47">being made by web frameworks and UI frameworks in this space.</span> </p>
<p><span data-start="480.47" data-end="482.11">These are all the accomplishments</span> <span data-start="482.11" data-end="484.18">from various frameworks — </span> <span data-start="484.18" data-end="489.31">Angular, Vue, Svelte, Ember, Gatsby, and React.</span> <span data-start="491.95" data-end="494.3">We are in close contact with the Angular team</span> <span data-start="494.3" data-end="498.95">and really excited for their achievements on both UX and DX.</span> <span data-start="498.95" data-end="501.86">In particular, they share differential loading,</span> <span data-start="501.86" data-end="505.46">which reduces polyfill in modern browsers,</span> <span data-start="505.46" data-end="507.5">and they have automatic deployments</span> <span data-start="507.5" data-end="510.05">to different platforms, to name a couple of things.</span> </p>
<p><span data-start="512.682" data-end="514.39">Also, [? Dion ?] mentioned in the keynote</span> <span data-start="514.39" data-end="516.49">that we have funded a number of projects</span> <span data-start="516.49" data-end="517.6">with the framework fund.</span> <span data-start="517.6" data-end="519.799">We'll have funding again next year.</span> <span data-start="519.799" data-end="522.37">So if you're playing a role in the framework ecosystem,</span> <span data-start="522.37" data-end="526.24">providing something of value, please apply for funding.</span> </p>
<p><span data-start="526.24" data-end="530.5">This is just another way to scale beyond our own small team</span> <span data-start="530.5" data-end="531.76">by helping other teams.</span> <span data-start="534.62" data-end="537.15">At Google I/O, I mentioned that we kicked off</span> <span data-start="537.15" data-end="541.8">an effort in the space directly collaborating with Next.js.</span> <span data-start="541.8" data-end="544.6">In particular, we are starting with performance improvements</span> <span data-start="544.6" data-end="545.64">first.</span> <span data-start="545.64" data-end="547.53">Both because this is an important problem</span> <span data-start="547.53" data-end="549.72">needing attention, but also, it wasn't</span> <span data-start="549.72" data-end="551.295">overlapping with other efforts.</span> </p>
<p><span data-start="554.04" data-end="556.32">So hopefully at this point, the choice of React</span> <span data-start="556.32" data-end="557.82">might be clearer.</span> <span data-start="557.82" data-end="559.74">It has a huge developer mindshare,</span> <span data-start="559.74" data-end="562.86">it's heavily used in apps where Chrome and web</span> <span data-start="562.86" data-end="565.23">users are spending their time.</span> <span data-start="565.23" data-end="567.81">And we found Next.js was the most production ready web</span> <span data-start="567.81" data-end="571.32">framework for building a general purpose React app.</span> </p>
<p><span data-start="571.32" data-end="575.832">Plus, we're a small team, so we had to start somewhere.</span> <span data-start="575.832" data-end="578.04">And finally, we're definitely counting on and working</span> <span data-start="578.04" data-end="580.83">towards having ripple effects and inspired</span> <span data-start="580.83" data-end="583.89">copying in other parts of the web frameworks,</span> <span data-start="583.89" data-end="589.6">like Gatsby, Nuxt, Angular, Ember, et cetera.</span> <span data-start="589.6" data-end="592.42">So this investment in the framework ecosystem</span> <span data-start="592.42" data-end="596.23">is an additional space that we missed.</span> <span data-start="596.23" data-end="598.42">This helps bring the web platform work</span> <span data-start="598.42" data-end="600.7">to a lot more developers.</span> <span data-start="600.7" data-end="602.83">And we realized as an organization</span> <span data-start="602.83" data-end="605.53">that our efforts are better spent collaborating</span> <span data-start="605.53" data-end="608.32">and contributing to the framework ecosystem,</span> <span data-start="608.32" data-end="611.57">instead of competing and pushing our own frameworks.</span> </p>
<p><span data-start="611.57" data-end="615.31">And it is in this spirit that we are contributing to Next.js</span> <span data-start="615.31" data-end="617.77">instead of building our own thing from scratch.</span> <span data-start="621.18" data-end="623.77">So I mentioned that we'll have a performance focus, both</span> <span data-start="623.77" data-end="625.37">for our work and this talk.</span> <span data-start="625.37" data-end="628.13">So which problems should be addressed specifically?</span> <span data-start="628.13" data-end="631.4">To understand what's going on and why [INAUDIBLE] targets</span> <span data-start="631.4" data-end="634.4">are not being met for these user-centric metrics,</span> <span data-start="634.4" data-end="638.42">we did deep tracing on 25 Next and React apps.</span> <span data-start="638.42" data-end="640.43">And I want to share some insights,</span> <span data-start="640.43" data-end="642.95">as it directly informs the projects that we</span> <span data-start="642.95" data-end="645.96">are undertaking in this space.</span> </p>
<p><span data-start="645.96" data-end="649.05">By far, the big issue that stands out in traces</span> <span data-start="649.05" data-end="654.48">is this delay in servicing the first user interaction.</span> <span data-start="654.48" data-end="658.01">And this is typically from fetching lots of JavaScript.</span> <span data-start="658.01" data-end="662.06">So that's all the network from [? HTTP/2 ?] in yellow</span> <span data-start="662.06" data-end="664.73">on the left, and then executing all</span> <span data-start="664.73" data-end="667.7">of that code on the main thread.</span> <span data-start="667.7" data-end="670">And that's in pink.</span> <span data-start="670" data-end="674.16">And as you can see, that long execution on the main thread</span> <span data-start="674.16" data-end="677.17">is blocking the user's interaction.</span> <span data-start="677.17" data-end="678.96">So in this case, it's taking a couple</span> <span data-start="678.96" data-end="681.75">of seconds on the network and another two to three seconds</span> <span data-start="681.75" data-end="683.29">on the main thread.</span> </p>
<p><span data-start="683.29" data-end="685.68">This is a long window during which</span> <span data-start="685.68" data-end="687.608">the user is unable to interact.</span> <span data-start="687.608" data-end="689.4">This is one reason why a lot of our efforts</span> <span data-start="689.4" data-end="691.5">have been focused on JavaScript.</span> <span data-start="694.182" data-end="695.89">First interaction isn't the only problem.</span> <span data-start="695.89" data-end="699.4">We're also seeing slow times for first contentful paint,</span> <span data-start="699.4" data-end="701.19">largest contentful paint.</span> <span data-start="701.19" data-end="704.38">And there's a number of reasons for this.</span> <span data-start="704.38" data-end="706.05">For example, the time to first byte</span> <span data-start="706.05" data-end="708.71">is low and takes over a second.</span> </p>
<p><span data-start="708.71" data-end="712.17">We're often seeing sync scripts in [? head ?] that are render</span> <span data-start="712.17" data-end="714.72">blocking, including third party scripts that</span> <span data-start="714.72" data-end="717.19">tend to sneak in here.</span> <span data-start="717.19" data-end="720.84">Web fonts are slow, hero images are slow, and sometimes not</span> <span data-start="720.84" data-end="723.13">optimized.</span> </p>
<p><span data-start="723.13" data-end="725.29">And finally, the third problem I want to mention</span> <span data-start="725.29" data-end="727.52">is the problem of data.</span> <span data-start="727.52" data-end="729.91">Data is as important as JavaScript</span> <span data-start="729.91" data-end="733.01">for rendering content, getting the page hydrated.</span> <span data-start="733.01" data-end="736">And we are seeing a lot of fetching raw data</span> <span data-start="736" data-end="739.88">from REST endpoints, a lot of post-processing of the results.</span> <span data-start="739.88" data-end="742.66">And this is a lot of JavaScript work on the client,</span> <span data-start="742.66" data-end="746.86">in addition to all the code that's needed to execute this.</span> <span data-start="746.86" data-end="749.57">And finally, there is this waterfall</span> <span data-start="749.57" data-end="752.65">from cascading fetches of JavaScript and data.</span> <span data-start="752.65" data-end="754.15">So I'm going to hand off to Houssein</span> <span data-start="754.15" data-end="757.91">to talk about what we are doing about all of this in Next.js.</span> </p>
</section>

<section>
<p><span data-start="763.56" data-end="765.06"><span class="speaker">Houssein Djirdeh</span>: So one thing we've</span> <span data-start="765.06" data-end="768.39">been doing the past six months has been working closely</span> <span data-start="768.39" data-end="771.3">with the Next.js team to improve the framework</span> <span data-start="771.3" data-end="773.49">in a number of different ways.</span> <span data-start="773.49" data-end="775.41">And we've approached this by identifying</span> <span data-start="775.41" data-end="777.66">areas of improvement along with the team</span> <span data-start="777.66" data-end="781.283">and slowly incrementing and adding optimizations one</span> <span data-start="781.283" data-end="781.95">after the other.</span> <span data-start="786.16" data-end="787.73">And this was a team effort.</span> <span data-start="787.73" data-end="789.35">There were quite a few of us involved</span> <span data-start="789.35" data-end="792.05">that worked alongside many amazing folks in the Next.js</span> <span data-start="792.05" data-end="795.06">team that made it possible to see a lot of these features</span> <span data-start="795.06" data-end="795.56">land.</span> <span data-start="797.957" data-end="799.54">For things that we worked on, we tried</span> <span data-start="799.54" data-end="802.79">to find the lowest hanging fruit that will result in the biggest</span> <span data-start="802.79" data-end="804.34">impact.</span> </p>
<p><span data-start="804.34" data-end="807.61">This included improving the Webpack chunking strategy used</span> <span data-start="807.61" data-end="811.07">in Next.js, differential loading to minimize</span> <span data-start="811.07" data-end="814.1">the amount of polyfilled code shipped to browsers that don't</span> <span data-start="814.1" data-end="818.83">need it, a number of JavaScript optimizations,</span> <span data-start="818.83" data-end="821.86">improved performance tracking by instrumenting a few custom</span> <span data-start="821.86" data-end="825.58">metrics, and roles exploring our conformance story</span> <span data-start="825.58" data-end="827.68">to see if we can generate better errors</span> <span data-start="827.68" data-end="830.514">and warnings for common developer [INAUDIBLE].</span> </p>
<p><span data-start="833.403" data-end="835.07">To begin, let's start talking about what</span> <span data-start="835.07" data-end="838.28">we've been doing to improve how chunks get generated</span> <span data-start="838.28" data-end="843.03">in every Next.js application.</span> <span data-start="843.03" data-end="846.27">We began by leveraging Webpack's SplitChunksPlugin</span> <span data-start="846.27" data-end="850.32">to modify how a Next.js app gets chunked and outputted</span> <span data-start="850.32" data-end="851.88">to the browser.</span> </p>
<p><span data-start="851.88" data-end="854.88">We did this by making sure a separate chunk is</span> <span data-start="854.88" data-end="859.49">outputted for every third-party dependency of a certain size.</span> <span data-start="859.49" data-end="863.29">All framework-specific libraries like React and ReactDOM</span> <span data-start="863.29" data-end="867.06">are output in their own fixed, cacheable chunk.</span> <span data-start="867.06" data-end="868.79">And the rest of the application code</span> <span data-start="868.79" data-end="872.75">is outputted in multiple small shared chunks that minimize</span> <span data-start="872.75" data-end="876.24">duplicate code across routes.</span> <span data-start="876.24" data-end="878.43">The main purpose of this new strategy</span> <span data-start="878.43" data-end="881.7">is specifically to limit code shipped to the browser</span> <span data-start="881.7" data-end="884.715">to only what is actually needed for the route itself.</span> <span data-start="888.69" data-end="890.25">We tried our new chunking strategy</span> <span data-start="890.25" data-end="892.71">with a few major Next.js sites, one</span> <span data-start="892.71" data-end="896.55">of them being Barnebys.com, a large search engine</span> <span data-start="896.55" data-end="899.13">for antiques and collectibles.</span> </p>
<p><span data-start="899.13" data-end="901.89">Almost immediately we saw some amazing wins</span> <span data-start="901.89" data-end="903.24">with granular chunking enabled.</span> <span data-start="905.79" data-end="908.59">And here you can see a side by side of the same site</span> <span data-start="908.59" data-end="911.56">with and without the feature enabled.</span> <span data-start="911.56" data-end="914.68">The biggest wins were noticed after navigating</span> <span data-start="914.68" data-end="918.288">to multiple routes throughout the entire application.</span> <span data-start="925.13" data-end="927.92">You can see that after navigating through six pages,</span> <span data-start="927.92" data-end="930.77">the difference in the amount of JavaScript code fetched</span> <span data-start="930.77" data-end="932.42">was substantial.</span> <span data-start="932.42" data-end="934.19">Over a hundred kilobytes of duplicate</span> <span data-start="934.19" data-end="937.55">code was shaved using a better and more nuanced</span> <span data-start="937.55" data-end="938.33">chunking strategy.</span> </p>
<p><span data-start="942.34" data-end="945.85">With Barnebys.com, a 23% app size reduction</span> <span data-start="945.85" data-end="949.49">was noticed with much faster navigations and improved cache.</span> <span data-start="953.85" data-end="956.65">And if we take a look at things in terms of the largest bundle,</span> <span data-start="956.65" data-end="958.48">the biggest JavaScript chunk alone</span> <span data-start="958.48" data-end="962.79">was cut down in size by 30%.</span> <span data-start="962.79" data-end="965.13">SumUp, another major Next.js site</span> <span data-start="965.13" data-end="967.13">that we tested our chunking strategy on,</span> <span data-start="967.13" data-end="972.29">saw a reduction in their largest JavaScript bundle by 64%.</span> <span data-start="972.29" data-end="974.53">And again, the amazing thing about these changes</span> <span data-start="974.53" data-end="977.77">is that it involved no actual change to the user's code</span> <span data-start="977.77" data-end="979.22">whatsoever.</span> </p>
<p><span data-start="979.22" data-end="980.86">This is all by just turning a flag</span> <span data-start="980.86" data-end="983.74">on that changed the chunking strategy to use</span> <span data-start="983.74" data-end="985.78">our newer granular approach.</span> <span data-start="989.84" data-end="992.53">Now differential loading was another optimization</span> <span data-start="992.53" data-end="995.003">that we worked on.</span> </p>
<p><span data-start="995.003" data-end="996.67">And the idea behind differential loading</span> <span data-start="996.67" data-end="1000.06">is to serve modern JavaScript to modern browsers, which</span> <span data-start="1000.06" data-end="1003.96">is often 80% to 90% of traffic.</span> <span data-start="1003.96" data-end="1005.82">To do this, we leveraged the fact</span> <span data-start="1005.82" data-end="1008.91">that modern browsers recognize and load script tags</span> <span data-start="1008.91" data-end="1011.85">with type module and ignore scripts</span> <span data-start="1011.85" data-end="1014.7">with a nomodule attribute.</span> <span data-start="1014.7" data-end="1017.89">Older browsers don't recognize these attributes,</span> <span data-start="1017.89" data-end="1020.13">so they load the more aggressively transpiled</span> <span data-start="1020.13" data-end="1024.2">and polyfilled nomodule scripts.</span> <span data-start="1024.2" data-end="1026.45">By just applying this simple technique,</span> <span data-start="1026.45" data-end="1029.81">we saw a 7% reduction in the total JavaScript</span> <span data-start="1029.81" data-end="1033.02">for Barnebys and other sites.</span> </p>
<p><span data-start="1033.02" data-end="1036.2">And that number jumps to 15% when you look</span> <span data-start="1036.2" data-end="1039.932">at only first-party JavaScript.</span> <span data-start="1039.932" data-end="1041.39">There is a potential here to reduce</span> <span data-start="1041.39" data-end="1045.77">the size of your JavaScript by up to 20% with no change</span> <span data-start="1045.77" data-end="1048.339">to your code.</span> <span data-start="1048.339" data-end="1051.98">So shipping modern code has some great performance benefits.</span> <span data-start="1051.98" data-end="1054.43">However, we wanted to find ways to optimize</span> <span data-start="1054.43" data-end="1057.89">this modern code even further.</span> <span data-start="1057.89" data-end="1060.41">And to do this, we've been working with the Babel team</span> <span data-start="1060.41" data-end="1065.16">to improved support for transpiling modern JavaScript.</span> <span data-start="1065.16" data-end="1068.28">Many of us have used Babel to transpile modern code</span> <span data-start="1068.28" data-end="1071.04">so that it works well in all browsers.</span> <span data-start="1071.04" data-end="1074.97">More recently, it's become common to use Babel preset-env</span> <span data-start="1074.97" data-end="1077.65">to target modern browsers.</span> </p>
<p><span data-start="1077.65" data-end="1079.65">And we do this by transpiling code</span> <span data-start="1079.65" data-end="1083.7">so that it runs in all browsers that support script type module</span> <span data-start="1083.7" data-end="1085.74">since that gives us a nice way to send</span> <span data-start="1085.74" data-end="1088.91">the code to those browsers.</span> <span data-start="1088.91" data-end="1091.89">Today, we're excited to introduce a new Babel</span> <span data-start="1091.89" data-end="1096.7">preset that optimizes specifically for this case.</span> <span data-start="1096.7" data-end="1098.82">It's called babel/preset-modules,</span> <span data-start="1098.82" data-end="1102.577">and it's available on npm right now.</span> </p>
<p><span data-start="1102.577" data-end="1104.16">Let me show you how it actually works.</span> <span data-start="1107.26" data-end="1109.32">Let's say we have this simple function written</span> <span data-start="1109.32" data-end="1111.45">in modern JavaScript.</span> <span data-start="1111.45" data-end="1114.21">Compiling this for modern browsers using</span> <span data-start="1114.21" data-end="1120.09">preset-env's target ES modules outputs a fair bit of code.</span> </p>
<p><span data-start="1120.09" data-end="1123.12">But running the same code through preset-modules</span> <span data-start="1123.12" data-end="1124.72">produces this.</span> <span data-start="1124.72" data-end="1127.52">It's a lot smaller.</span> <span data-start="1127.52" data-end="1128.39">Here's the thing.</span> <span data-start="1128.39" data-end="1132.68">Both outputs run in all browsers that support script type</span> <span data-start="1132.68" data-end="1134.78">module.</span> </p>
<p><span data-start="1134.78" data-end="1137.81">And this works because instead of converting modern syntax</span> <span data-start="1137.81" data-end="1140.74">to older syntax to avoid browser bugs,</span> <span data-start="1140.74" data-end="1144.29">the preset fixes each specific bug by transforming</span> <span data-start="1144.29" data-end="1147.53">to the closest possible [? none-broken ?] modern</span> <span data-start="1147.53" data-end="1149.67">syntax.</span> <span data-start="1149.67" data-end="1153.42">In our example, only one browser bug affects our code,</span> <span data-start="1153.42" data-end="1157.06">and its equivalent syntax circumvents it.</span> </p>
<p><span data-start="1157.06" data-end="1158.95">The result is that modern code can</span> <span data-start="1158.95" data-end="1165.15">be delivered nearly unmodified to most of your users.</span> <span data-start="1165.15" data-end="1167.16">If you're developing for modern browsers</span> <span data-start="1167.16" data-end="1169.98">or using the module nomodule approach,</span> <span data-start="1169.98" data-end="1173.04">we're interested in hearing how Babel preset-modules can</span> <span data-start="1173.04" data-end="1175.042">work for you.</span> <span data-start="1175.042" data-end="1177">We're also going to be working on incorporating</span> <span data-start="1177" data-end="1180.45">these optimizations back into preset-env,</span> <span data-start="1180.45" data-end="1183.551">bringing the benefits to even more developers.</span> <span data-start="1188.63" data-end="1190.43">Another thing we did was try improve</span> <span data-start="1190.43" data-end="1195.9">how we track performance in a framework like Next.js.</span> <span data-start="1195.9" data-end="1198.85">And we did this by leveraging the User Timing API</span> <span data-start="1198.85" data-end="1202.21">to add marks and measures for key points in the application</span> <span data-start="1202.21" data-end="1204.78">lifecycle.</span> </p>
<p><span data-start="1204.78" data-end="1206.76">This includes the time it takes for hydration</span> <span data-start="1206.76" data-end="1209.64">to begin after loading a page and the time it takes</span> <span data-start="1209.64" data-end="1213.02">for hydration to complete and the time it takes for rendering</span> <span data-start="1213.02" data-end="1215.84">to start once you make a rule change,</span> <span data-start="1215.84" data-end="1219.27">and similarly, how long it takes for a page to finish rendering</span> <span data-start="1219.27" data-end="1222.01">after navigating to it.</span> </p>
<p><span data-start="1222.01" data-end="1223.78">By applying what we thought were some</span> <span data-start="1223.78" data-end="1226.18">of the most important performance metrics</span> <span data-start="1226.18" data-end="1229.335">that should be tracked in a web framework like Next.js,</span> <span data-start="1229.335" data-end="1230.71">we wanted to make sure developers</span> <span data-start="1230.71" data-end="1232.75">don't have to worry about trying to measure</span> <span data-start="1232.75" data-end="1235.195">these nitty-gritty metrics themselves.</span> <span data-start="1238.17" data-end="1241.32">And the amazing thing with leveraging the User Timing API</span> <span data-start="1241.32" data-end="1244.08">is that all these values will now automatically show</span> <span data-start="1244.08" data-end="1248.187">every single time you test the Next.js page with Lighthouse.</span> </p>
<p><span data-start="1252.76" data-end="1254.74">One other thing that we're currently exploring</span> <span data-start="1254.74" data-end="1257.74">is a conformance story so that better errors and warnings</span> <span data-start="1257.74" data-end="1261.07">can be surfaced to the developer for many common footguns they</span> <span data-start="1261.07" data-end="1261.88">may run into.</span> <span data-start="1264.768" data-end="1266.31">Earlier in this talk, Shubhie covered</span> <span data-start="1266.31" data-end="1268.11">how there are many things that developers</span> <span data-start="1268.11" data-end="1270.36">need to be wary of that could affect</span> <span data-start="1270.36" data-end="1274.11">the performance of their site, such as blocking scripts,</span> <span data-start="1274.11" data-end="1278.313">web fonts, unoptimized images, and so forth.</span> <span data-start="1278.313" data-end="1279.73">Now all these things are just some</span> <span data-start="1279.73" data-end="1281.95">of the many common problems that developers</span> <span data-start="1281.95" data-end="1284.44">have to deal with when building web pages.</span> <span data-start="1287.75" data-end="1290.9">At Google, we began adopting a conformance model for many</span> <span data-start="1290.9" data-end="1293.51">of the internally built web frameworks that we use</span> <span data-start="1293.51" data-end="1296.99">to build many of our products.</span> </p>
<p><span data-start="1296.99" data-end="1298.81">And the idea behind this conformist model</span> <span data-start="1298.81" data-end="1300.64">is that it doesn't just statically analyze</span> <span data-start="1300.64" data-end="1304.06">code but actually tests for multiple checks</span> <span data-start="1304.06" data-end="1306.88">after code has been compiled.</span> </p>
<p><span data-start="1306.88" data-end="1309.46">By doing so, we're able to catch a lot of potential issues</span> <span data-start="1309.46" data-end="1311.38">with our final output that we may not have</span> <span data-start="1311.38" data-end="1314.28">noticed until it's too late.</span> <span data-start="1314.28" data-end="1317.73">This feature has helped teams build large scalable apps</span> <span data-start="1317.73" data-end="1321.66">while ensuring that code remains in check as much as possible.</span> <span data-start="1325.31" data-end="1327.95">And we wanted to see the same sort of concept</span> <span data-start="1327.95" data-end="1333.33">can be applied to an open-source framework like Next.js.</span> <span data-start="1333.33" data-end="1336.78">For example, what if you ran a Next.js build and then</span> <span data-start="1336.78" data-end="1339.18">you see an error telling you that you included</span> <span data-start="1339.18" data-end="1342.06">a render-blocking script, preventing you from actually</span> <span data-start="1342.06" data-end="1343.52">submitting your changes?</span> <span data-start="1347.1" data-end="1350.06">Now this concept builds on top of the idea of regular</span> <span data-start="1350.06" data-end="1352.55">build warnings and errors by providing checks</span> <span data-start="1352.55" data-end="1355.17">that are a lot more precise.</span> <span data-start="1355.17" data-end="1357.47">It needs to be enforced, but we also</span> <span data-start="1357.47" data-end="1359.78">want developers to have the flexibility</span> <span data-start="1359.78" data-end="1362.78">to decide what's enforced within their team,</span> <span data-start="1362.78" data-end="1365.03">and we want to do this by providing some API</span> <span data-start="1365.03" data-end="1369.67">control for them to enable and disable certain checks.</span> </p>
<p><span data-start="1369.67" data-end="1372.51">This entire concept is still very early stages,</span> <span data-start="1372.51" data-end="1374.83">and there's a lot that we need to think about.</span> <span data-start="1374.83" data-end="1376.72">But we have an open RFC, and we would</span> <span data-start="1376.72" data-end="1379.03">love to hear any feedback that you may have.</span> </p>
</section>

<section>
<p><span data-start="1381.89" data-end="1385.11"><span class="speaker">Shubhie Panicker</span>: So going back to our slide from before</span> <span data-start="1385.11" data-end="1387.55">and looking at this problem of this large chunk</span> <span data-start="1387.55" data-end="1389.643">of JavaScript-blocking interaction,</span> <span data-start="1389.643" data-end="1391.81">we found that even after all of these optimizations,</span> <span data-start="1391.81" data-end="1395.38">we are still seeing 200 and 900k compressed JavaScript,</span> <span data-start="1395.38" data-end="1396.97">and this still means multiple seconds</span> <span data-start="1396.97" data-end="1398.978">on the network and the main thread.</span> <span data-start="1398.978" data-end="1401.02">So the most obvious thing that might come to mind</span> <span data-start="1401.02" data-end="1403.15">is ship less JavaScript.</span> <span data-start="1403.15" data-end="1405.712">But this means shipping fewer features.</span> <span data-start="1405.712" data-end="1407.17">So again, consider putting yourself</span> <span data-start="1407.17" data-end="1409">in the shoes of the team responsible</span> <span data-start="1409" data-end="1410.47">for a business-critical app.</span> </p>
<p><span data-start="1410.47" data-end="1413.5">It's not practical for them to drop all their JavaScript</span> <span data-start="1413.5" data-end="1415.72">beyond the first 100 or 200 kilobytes</span> <span data-start="1415.72" data-end="1419.68">and just remove all ads, tag managers, and analytics and so</span> <span data-start="1419.68" data-end="1421.77">forth.</span> <span data-start="1421.77" data-end="1424.29">The point stands though that features come at a cost,</span> <span data-start="1424.29" data-end="1427.96">and JavaScript is particularly expensive on the main thread.</span> <span data-start="1427.96" data-end="1430.61">So we need to fundamentally uncouple</span> <span data-start="1430.61" data-end="1434.79">this trade-off between features and performance.</span> <span data-start="1434.79" data-end="1437.84">So in Next.js we are already doing all of these things — </span> <span data-start="1437.84" data-end="1442.65">compression, minification, tree shaking, dead-code elimination.</span> <span data-start="1442.65" data-end="1445.22">And then Houssein mentioned the additional optimizations</span> <span data-start="1445.22" data-end="1448.65">we add around polyfills, optimized chunking.</span> <span data-start="1448.65" data-end="1451.83">So even after tackling a lot of this low-hanging fruit,</span> <span data-start="1451.83" data-end="1454.83">we are still finding that JavaScript is too expensive.</span> <span data-start="1454.83" data-end="1457.67">So this is a DevTools Timeline on a Next.js app,</span> <span data-start="1457.67" data-end="1461.24">and it shows us what's going on in the initial page load.</span> </p>
<p><span data-start="1461.24" data-end="1464.55">There is this big long task from setup and hydration,</span> <span data-start="1464.55" data-end="1466.85">and that first user interaction is still blocked</span> <span data-start="1466.85" data-end="1470.97">until the script has finished.</span> <span data-start="1470.97" data-end="1473.31">So you may have heard of concurrent mode in React.</span> <span data-start="1473.31" data-end="1476.31">It enables progressive hydration by breaking up</span> <span data-start="1476.31" data-end="1480.48">that long continuous task that involves setup and hydration</span> <span data-start="1480.48" data-end="1482.7">into lots of smaller tasks.</span> <span data-start="1482.7" data-end="1484.53">It's not that it's eliminating hydration.</span> <span data-start="1484.53" data-end="1487.147">It's that it's breaking it up and staggering it.</span> <span data-start="1487.147" data-end="1489.48">And the idea here is now the main thread is serviceable.</span> <span data-start="1489.48" data-end="1492.37">It can respond to user interaction.</span> <span data-start="1492.37" data-end="1494.76">So we did some work to enable concurrent mode in ZEIT, so</span> <span data-start="1494.76" data-end="1497.34">let's look at the results from that.</span> </p>
<p><span data-start="1497.34" data-end="1502.19">The blocking time reduced a lot by 53%.</span> <span data-start="1502.19" data-end="1506.023">But why isn't it 100% better?</span> <span data-start="1506.023" data-end="1507.44">So to understand that, we're going</span> <span data-start="1507.44" data-end="1510.62">to go back to that original trace</span> <span data-start="1510.62" data-end="1512.64">and see what's going on here.</span> <span data-start="1512.64" data-end="1515.93">So on the left we are basically seeing about one third</span> <span data-start="1515.93" data-end="1518.15">or half of the slice.</span> <span data-start="1518.15" data-end="1520.13">On the left is all this kind of Webpack</span> <span data-start="1520.13" data-end="1522.95">bookkeeping, module initialization, and setup.</span> <span data-start="1522.95" data-end="1526.04">And on the right, we have React coming in, doing DOM work,</span> <span data-start="1526.04" data-end="1529.21">and doing hydration.</span> <span data-start="1529.21" data-end="1530.86">The problem is that both of these</span> <span data-start="1530.86" data-end="1533.59">depend on what happens to be on that page.</span> </p>
<p><span data-start="1533.59" data-end="1535.54">So it can vary arbitrarily.</span> <span data-start="1535.54" data-end="1537.49">These are two very different opportunities.</span> <span data-start="1537.49" data-end="1539.11">Turning on concurrent mode immediately</span> <span data-start="1539.11" data-end="1542.02">fixed the problem on the right, but we haven't done anything</span> <span data-start="1542.02" data-end="1543.632">about the problem on the left.</span> <span data-start="1543.632" data-end="1545.59">So we are actually just starting to tackle this</span> <span data-start="1545.59" data-end="1549.535">by looking at deferring model initialization and setup.</span> <span data-start="1549.535" data-end="1551.05">And the idea here is that we want</span> <span data-start="1551.05" data-end="1554.91">to get to getting that startup time to be fixed</span> <span data-start="1554.91" data-end="1559.03">or constant and decoupled from the specific contents</span> <span data-start="1559.03" data-end="1562.03">or the size of the page.</span> <span data-start="1562.03" data-end="1566.07">So once we tackle that, we'll achieve our fixed startup,</span> <span data-start="1566.07" data-end="1568.32">but there's still a missing piece here.</span> <span data-start="1568.32" data-end="1570.06">We still need to be able to prioritize</span> <span data-start="1570.06" data-end="1571.89">the specific features on the page</span> <span data-start="1571.89" data-end="1577.5">that the user actively interacts with or engages with.</span> </p>
<p><span data-start="1577.5" data-end="1580.05">And this is where selective hydration comes in.</span> <span data-start="1580.05" data-end="1582.98">This was announced at the recent React Conf.</span> <span data-start="1582.98" data-end="1585.96">And the idea here is as the user interacts</span> <span data-start="1585.96" data-end="1588.09">with the image carousel or the left bar</span> <span data-start="1588.09" data-end="1589.95">or any of those components or the top,</span> <span data-start="1589.95" data-end="1593.37">those specific items are prioritized</span> <span data-start="1593.37" data-end="1595.155">over everything else in the page.</span> <span data-start="1597.667" data-end="1600">So finally I don't want to leave you with the impression</span> <span data-start="1600" data-end="1601.77">that turning on concurrent mode was</span> <span data-start="1601.77" data-end="1603.9">as easy as flipping a switch.</span> </p>
<p><span data-start="1603.9" data-end="1606.84">This involved pretty substantial changes to Next.js</span> <span data-start="1606.84" data-end="1608.79">to update incompatible concepts.</span> <span data-start="1608.79" data-end="1611.68">It required migration of the target app.</span> <span data-start="1611.68" data-end="1613.86">There's still the problem of third-party npm apps</span> <span data-start="1613.86" data-end="1615.223">that need to be upgraded.</span> <span data-start="1615.223" data-end="1616.89">And even though this is a bunch of work,</span> <span data-start="1616.89" data-end="1621.6">we are on course to update the ZEIT app to concurrent mode.</span> <span data-start="1621.6" data-end="1624.63">And this is the first big step towards uncoupling</span> <span data-start="1624.63" data-end="1627.54">that fundamental trade-off between features</span> <span data-start="1627.54" data-end="1629.27">and performance.</span> <span data-start="1629.27" data-end="1632.16">And you're already seeing a 53% improvement</span> <span data-start="1632.16" data-end="1636.09">in that first interactive blocking time.</span> <span data-start="1636.09" data-end="1638.48">So there's a lot more beyond performance</span> <span data-start="1638.48" data-end="1641.54">in terms of having a compelling web framework that</span> <span data-start="1641.54" data-end="1643.46">makes developers productive.</span> </p>
<p><span data-start="1643.46" data-end="1645.14">And at this point, I want to welcome</span> <span data-start="1645.14" data-end="1647.12">our guest, Tim Neutkens — </span> <span data-start="1647.12" data-end="1649.64">he's the lead developer of Next.js — </span> <span data-start="1649.64" data-end="1653.37">to talk about how Next.js helps developers here.</span> <span data-start="1653.37" data-end="1656.6">[APPLAUSE]</span> </p>
</section>

<section>
<p><span data-start="1659" data-end="1662.05"><span class="speaker">Tim Neutkens</span>: Good morning, everyone.</span> <span data-start="1662.05" data-end="1665.91">So Next solves two things in the React ecosystem.</span> <span data-start="1665.91" data-end="1671.14">It helps you with going to production really fast but also</span> <span data-start="1671.14" data-end="1674.12">with developer experience.</span> <span data-start="1674.12" data-end="1678.9">So let's dive in what Next actually helps you with.</span> <span data-start="1678.9" data-end="1681.74">So it's easy to get started with Next,</span> <span data-start="1681.74" data-end="1686.15">but also it's easy to evolve to larger applications.</span> <span data-start="1686.15" data-end="1690.64">So we want to ensure that your app or site is becoming bigger</span> <span data-start="1690.64" data-end="1694.48">and more successful over time and that your team can actually</span> <span data-start="1694.48" data-end="1698.14">get great developer experience in doing so,</span> <span data-start="1698.14" data-end="1699.4">which leads to the next point.</span> </p>
<p><span data-start="1699.4" data-end="1703.54">It is great for individuals but also for teams.</span> <span data-start="1703.54" data-end="1706.12">And you can actually do static site generation</span> <span data-start="1706.12" data-end="1708.56">or dynamic rendering per page.</span> <span data-start="1708.56" data-end="1710.47">So you can choose what you want to do</span> <span data-start="1710.47" data-end="1713.98">per page as your project grows.</span> <span data-start="1713.98" data-end="1717.1">So in short, Next is great for really simple websites</span> <span data-start="1717.1" data-end="1722.2">but also for the most demanding apps like the largest websites</span> <span data-start="1722.2" data-end="1724.88">in the world, for example.</span> </p>
<p><span data-start="1724.88" data-end="1729.13">So let's look at what Next helps you with currently.</span> <span data-start="1729.13" data-end="1733.798">As Shubhie said before in this talk, it was basically</span> <span data-start="1733.798" data-end="1735.34">there's a lot of things that you have</span> <span data-start="1735.34" data-end="1740.65">to think about when you're developing a website or a web</span> <span data-start="1740.65" data-end="1741.75">app.</span> <span data-start="1741.75" data-end="1745.69">It goes from backend logic to unit testing, UI component</span> <span data-start="1745.69" data-end="1747.82">models, and everything really.</span> <span data-start="1747.82" data-end="1751.32">So Next helps you with a subset of these things</span> <span data-start="1751.32" data-end="1756.06">today, which is the backend logic and server logic.</span> <span data-start="1756.06" data-end="1759.03">So it actually helps you with data fetching</span> <span data-start="1759.03" data-end="1763.47">but also with writing API routes if you want to.</span> </p>
<p><span data-start="1763.47" data-end="1765.15">Then there is the UI component model.</span> <span data-start="1765.15" data-end="1768.29">Next obviously uses React, as we said.</span> <span data-start="1768.29" data-end="1770.52">And it helps you just write React components</span> <span data-start="1770.52" data-end="1773.89">and not worry about all the other things.</span> <span data-start="1773.89" data-end="1775.87">Then there is data flow, and data flow</span> <span data-start="1775.87" data-end="1781.24">means data fetching but also, for example,</span> <span data-start="1781.24" data-end="1784.29">how you get data into your app.</span> <span data-start="1784.29" data-end="1786.73">Then there is CSS encapsulation, which</span> <span data-start="1786.73" data-end="1790">means how you write CSS in a way that you don't have</span> <span data-start="1790" data-end="1792.22">to go back and rewrite everything</span> <span data-start="1792.22" data-end="1795.7">later on as you get encapsulation per component,</span> <span data-start="1795.7" data-end="1796.6">for example.</span> </p>
<p><span data-start="1796.6" data-end="1800.08">So Next ships with styled-jsx, which is this library that we</span> <span data-start="1800.08" data-end="1803.26">wrote that we think is pretty great for writing</span> <span data-start="1803.26" data-end="1807.49">encapsulated CSS, but also we allow</span> <span data-start="1807.49" data-end="1809.89">you to integrate with any CSS ingest library</span> <span data-start="1809.89" data-end="1811.39">that you would want to use.</span> <span data-start="1811.39" data-end="1815.23">So that's styled-components or Emotion, for example.</span> <span data-start="1815.23" data-end="1817.45">Then there is deployment and releases.</span> <span data-start="1817.45" data-end="1821.68">So Next is a bold command that outputs a production-ready web</span> <span data-start="1821.68" data-end="1823.66">application for you.</span> </p>
<p><span data-start="1823.66" data-end="1825.67">So you only give it React components,</span> <span data-start="1825.67" data-end="1829.24">and then we build it for you in a way that actually</span> <span data-start="1829.24" data-end="1830.98">is going to work in production, and we</span> <span data-start="1830.98" data-end="1834.46">optimize a lot of different things in that way.</span> <span data-start="1834.46" data-end="1836.38">And when it comes to hosting Next.js,</span> <span data-start="1836.38" data-end="1840.37">the company behind Next.js, ZEIT, the company I work for,</span> <span data-start="1840.37" data-end="1842.62">offers a hosting platform that is specifically</span> <span data-start="1842.62" data-end="1844.603">tailored to Next.js apps.</span> <span data-start="1844.603" data-end="1846.02">So they optimize a lot of things — </span> <span data-start="1846.02" data-end="1846.82">[INAUDIBLE]. obviously, [INAUDIBLE].</span> <span data-start="1846.82" data-end="1847.933">and that kind of thing.</span> </p>
<p><span data-start="1847.933" data-end="1849.79">Then there is security.</span> <span data-start="1849.79" data-end="1852.5">So security is a really broad topic, of course,</span> <span data-start="1852.5" data-end="1856.21">but Next specifically helps you with enabling CSP in your app</span> <span data-start="1856.21" data-end="1859.43">by default, for example.</span> <span data-start="1859.43" data-end="1862.675">It also, through React, helps you prevent XSS injection</span> <span data-start="1862.675" data-end="1865.95">and other things.</span> <span data-start="1865.95" data-end="1868.06">As you can see, however, currently there</span> <span data-start="1868.06" data-end="1870.87">are a few things that Next doesn't cover,</span> <span data-start="1870.87" data-end="1872.62">and those are the things that you actually</span> <span data-start="1872.62" data-end="1876.46">have to think about yourself and investigate and figure out</span> <span data-start="1876.46" data-end="1878.95">what you going to do there.</span> </p>
<p><span data-start="1878.95" data-end="1882.56">And generally companies end up writing their own solutions</span> <span data-start="1882.56" data-end="1885.92">for this or implementing their own solution.</span> <span data-start="1885.92" data-end="1889.87">However, to give great developer experience,</span> <span data-start="1889.87" data-end="1893.96">we want to help you in being better at this.</span> <span data-start="1893.96" data-end="1896.62">So let's look at what is currently being investigated</span> <span data-start="1896.62" data-end="1900.44">to improve DX for you.</span> <span data-start="1900.44" data-end="1902.96">So these sort of things that we're currently working on</span> <span data-start="1902.96" data-end="1908.16">to help you with building more scalable web applications.</span> <span data-start="1908.16" data-end="1909.66">So one of them is translation.</span> <span data-start="1909.66" data-end="1913.76">So we're seeing a growth in websites that are using</span> <span data-start="1913.76" data-end="1916.22">a non-English — </span> <span data-start="1916.22" data-end="1919.83">that's targeting non-English speakers, for example.</span> <span data-start="1919.83" data-end="1923.6">So that means that there need to be good internationalization</span> <span data-start="1923.6" data-end="1925.52">solutions out there because otherwise it</span> <span data-start="1925.52" data-end="1928.16">gets really hard for teams to implement this.</span> <span data-start="1928.16" data-end="1932.28">They might actually choose to not implement it at all.</span> </p>
<p><span data-start="1932.28" data-end="1933.4">Then there's unit testing.</span> <span data-start="1933.4" data-end="1934.97">So unit testing, integration testing</span> <span data-start="1934.97" data-end="1938.57">is a really broad topic also, but we're</span> <span data-start="1938.57" data-end="1941.63">aiming to provide good defaults for you</span> <span data-start="1941.63" data-end="1946.13">to help you not have to set up all the compilation</span> <span data-start="1946.13" data-end="1950.09">and bundling involvement that are needed</span> <span data-start="1950.09" data-end="1952.97">to do unit testing and integration testing for React,</span> <span data-start="1952.97" data-end="1954.19">for example.</span> </p>
<p><span data-start="1954.19" data-end="1956.32">There is image handling.</span> <span data-start="1956.32" data-end="1958.97">So images make up a large percentage</span> <span data-start="1958.97" data-end="1961.55">of what you show on a website, right?</span> <span data-start="1961.55" data-end="1964.04">But we don't provide an opinionated way</span> <span data-start="1964.04" data-end="1965.93">to load images currently.</span> </p>
<p><span data-start="1965.93" data-end="1967.43">So that means that it's pretty easy</span> <span data-start="1967.43" data-end="1971.57">to include images that are too large or too small</span> <span data-start="1971.57" data-end="1976.79">or something that is just not optimized enough.</span> <span data-start="1976.79" data-end="1978.54">So we're working on that also.</span> <span data-start="1978.54" data-end="1980.99">Then there's analytics, and analytics is something</span> <span data-start="1980.99" data-end="1983.03">that you all probably use in a website</span> <span data-start="1983.03" data-end="1985.76">at least because you want to know what your user are</span> <span data-start="1985.76" data-end="1987.69">doing on the page.</span> </p>
<p><span data-start="1987.69" data-end="1989.9">However, to correctly implement and relay</span> <span data-start="1989.9" data-end="1992.99">analytics in single-page applications is really hard.</span> <span data-start="1992.99" data-end="1996.11">You need to be very aware of which route changes are</span> <span data-start="1996.11" data-end="1998.7">happening and that kind of thing.</span> <span data-start="1998.7" data-end="2002.5">So we're starting to investigate solutions that</span> <span data-start="2002.5" data-end="2004.49">will help you with this also.</span> <span data-start="2004.49" data-end="2006.22">Then there's error reporting.</span> <span data-start="2006.22" data-end="2009.97">So you probably all have written bugs before,</span> <span data-start="2009.97" data-end="2016.21">and it's really hard to catch bugs in production in websites</span> <span data-start="2016.21" data-end="2020.65">because it runs on a browser that is not your own browser.</span> <span data-start="2020.65" data-end="2024.76">And because of that, you can't see what users are doing.</span> <span data-start="2024.76" data-end="2027.97">So error reporting is very important in that way.</span> <span data-start="2027.97" data-end="2030.64">So relaying errors that happen is going</span> <span data-start="2030.64" data-end="2033.49">to be easier very soon too.</span> <span data-start="2033.49" data-end="2036.13">And all of these improvements serve the goal</span> <span data-start="2036.13" data-end="2039.76">of making you and your team more productive with good defaults</span> <span data-start="2039.76" data-end="2041.39">that can scale.</span> </p>
<p><span data-start="2041.39" data-end="2044.86">Another thing that I didn't mention in this slide but we're</span> <span data-start="2044.86" data-end="2049.09">also working on accessibility improvements</span> <span data-start="2049.09" data-end="2051.579">that report accessibility issues that</span> <span data-start="2051.579" data-end="2052.704">help you solve them faster.</span> <span data-start="2055.791" data-end="2057.73">And we're not doing this alone.</span> </p>
<p><span data-start="2057.73" data-end="2060.969">As Shubhie and Houssein have been explaining,</span> <span data-start="2060.969" data-end="2063.32">the Chrome team is helping us in this effort.</span> <span data-start="2063.32" data-end="2065.83">So my team at ZEIT, which is currently</span> <span data-start="2065.83" data-end="2068.98">four people, including me, is working on Next more so</span> <span data-start="2068.98" data-end="2071.71">from the developer-experience side of things.</span> <span data-start="2071.71" data-end="2075.489">The Chrome team is doing a lot of performance improvements.</span> <span data-start="2075.489" data-end="2077.679">And besides that, we're obviously</span> <span data-start="2077.679" data-end="2079.6">an open-source project, so you can all</span> <span data-start="2079.6" data-end="2083.11">contribute to improving the whole vision of Next.</span> <span data-start="2083.11" data-end="2087.4">And there have been already many contributors,</span> <span data-start="2087.4" data-end="2092.719">over 830, that have been involved in this project.</span> <span data-start="2092.719" data-end="2095.23">So one of them that I would like specifically called out</span> <span data-start="2095.23" data-end="2098.41">is Giuseppe who has been maintaining styled-jsx ever</span> <span data-start="2098.41" data-end="2103.42">since it was released as an open-source contributor.</span> <span data-start="2103.42" data-end="2107.292">And I'd like to hand it back to Shubhie now to end the talk.</span> </p>
</section>

<section>
<p><span data-start="2107.292" data-end="2108.25"><span class="speaker">Shubhie Panicker</span>: Cool.</span> <span data-start="2108.25" data-end="2111.37">I want to wrap up by saying that all of this work</span> <span data-start="2111.37" data-end="2113.77">actually helps the web platform and web APIs</span> <span data-start="2113.77" data-end="2116.17">as well because working with these frameworks</span> <span data-start="2116.17" data-end="2118.81">on pragmatic solutions for production apps actually</span> <span data-start="2118.81" data-end="2122.35">tells us what APIs are missing, what APIs developers are</span> <span data-start="2122.35" data-end="2123.04">struggling with.</span> <span data-start="2123.04" data-end="2126.13">So this becomes a natural funnel of use cases</span> <span data-start="2126.13" data-end="2128.87">back to the web platform.</span> <span data-start="2128.87" data-end="2130.42">And so this is the end of our talk,</span> <span data-start="2130.42" data-end="2133.15">and I just want to leave you with a few messages.</span> <span data-start="2133.15" data-end="2134.83">If you're an app developer, please</span> <span data-start="2134.83" data-end="2138.61">consider reaching for a fuller-featured web framework</span> <span data-start="2138.61" data-end="2142.07">instead of only thinking about the bare-bones UI framework.</span> </p>
<p><span data-start="2142.07" data-end="2144.49">This will enable your team to focus on features</span> <span data-start="2144.49" data-end="2147.27">and be more productive.</span> <span data-start="2147.27" data-end="2149.99">If you're a UI framework or a web developer — </span> <span data-start="2149.99" data-end="2152.7">a web-framework developer, please reach out</span> <span data-start="2152.7" data-end="2155.71">and consider investing some time in a partnership with us.</span> <span data-start="2155.71" data-end="2159.51">We really want your input on web platform APIs.</span> <span data-start="2159.51" data-end="2161.84">Collaborations are two-way efforts,</span> <span data-start="2161.84" data-end="2164.28">and we're really seeking to deepen our collaborations</span> <span data-start="2164.28" data-end="2167.21">with Vue, Ember, Svelte, et cetera.</span> <span data-start="2177.22" data-end="2183.02">And anyway, finally if you are in the tooling or bundling</span> <span data-start="2183.02" data-end="2186.71">space like responsible for bundler, compiler, linter,</span> <span data-start="2186.71" data-end="2189.23">again, please consider working with us closely.</span> <span data-start="2189.23" data-end="2190.55">We want your feedback.</span> </p>
<p><span data-start="2190.55" data-end="2192.26">And if it makes sense for your project,</span> <span data-start="2192.26" data-end="2195.2">please consider applying for the framework fund.</span> <span data-start="2195.2" data-end="2196.01">Thank you.</span> <span data-start="2196.01" data-end="2196.91">[APPLAUSE]</span> <span data-start="2196.91" data-end="2201.16">[MUSIC PLAYING]</span> </p>
</section>